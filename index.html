<!DOCTYPE html><html lang="id"><head>  <meta charset="utf-8" />  <meta name="viewport" content="width=device-width, initial-scale=1" />  <title>Keuangan Harian — CRUD (+ /  / =)</title>  <style>    :root{      --bg:#0f1115; --panel:#141822; --muted:#2a3040; --accent:#6ee7b7; --accent-2:#60a5fa; --warn:#fbbf24; --danger:#fb7185; --text:#e5e7eb; --sub:#9ca3af; --good:#34d399; --bad:#f87171;      --radius:18px; --radius-sm:12px; --shadow:0 10px 30px rgba(0,0,0,.35), 0 2px 10px rgba(0,0,0,.25);    }    *{box-sizing:border-box}    html,body{height:100%}    body{margin:0;background:linear-gradient(180deg,#0d1016, #0c1220 50%, #0f1424);font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";color:var(--text)}    .container{max-width:1100px;margin:32px auto;padding:0 16px}    .app{background:linear-gradient(180deg,#121826, #101521);border:1px solid #1e2433;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}    header{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:18px 22px;border-bottom:1px solid #1f2534;background:radial-gradient(1000px 400px at -20% -60%, rgba(96,165,250,.12), transparent),      radial-gradient(800px 300px at 120% -40%, rgba(110,231,183,.10), transparent)}    header h1{font-size:20px;margin:0;letter-spacing:.3px}    header .badge{font-size:12px;color:#0b1220;background:linear-gradient(180deg, var(--accent), #10b981);padding:6px 10px;border-radius:999px;font-weight:700}    .grid{display:grid;grid-template-columns:1.4fr .8fr;gap:16px;padding:18px}    @media (max-width:900px){.grid{grid-template-columns:1fr}}    .card{background:linear-gradient(180deg,#121725,#0e1422);border:1px solid #1e2433;border-radius:var(--radius-sm);padding:16px}    .card h2{margin:0 0 12px;font-size:16px;color:var(--text)}    .row{display:flex;gap:10px;flex-wrap:wrap}    input[type="text"], input[type="number"], input[type="date"], select, textarea{      background:#0f1524;color:var(--text);border:1px solid #1f2638;border-radius:12px;padding:10px 12px;outline:none;width:100%    }    input::placeholder, textarea::placeholder{color:#7b839b}    label{font-size:12px;color:var(--sub)}    .btn{appearance:none;border:none;background:#1b2335;color:var(--text);padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer;transition:.2s;border:1px solid #24304b}    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.25)}    .btn.primary{background:linear-gradient(180deg,#2b3c65,#203051);border-color:#2c3a5d}    .btn.accent{background:linear-gradient(180deg,#39e39f,#16b981);color:#032012;border-color:#16b981}    .btn.warn{background:linear-gradient(180deg,#fde047,#fbbf24);color:#2b2105;border-color:#facc15}    .btn.danger{background:linear-gradient(180deg,#fb7185,#ef4444);color:#2b0f12;border-color:#ef4444}    .toolbar{display:flex;gap:8px;flex-wrap:wrap}    table{width:100%;border-collapse:separate;border-spacing:0 10px}    thead th{font-size:12px;text-transform:uppercase;color:#9aa3ba;letter-spacing:.12em;text-align:left;padding:0 12px}    tbody tr{background:linear-gradient(180deg,#111727,#0d1322);border:1px solid #1e2434}    tbody td{padding:12px;border-top:1px solid #202739;border-bottom:1px solid #202739}    tbody tr{border-radius:12px;overflow:hidden}    tbody tr td:first-child{border-left:1px solid #202739;border-top-left-radius:12px;border-bottom-left-radius:12px}    tbody tr td:last-child{border-right:1px solid #202739;border-top-right-radius:12px;border-bottom-right-radius:12px}    .type-pill{font-size:12px;font-weight:700;padding:6px 10px;border-radius:999px;display:inline-flex;align-items:center;gap:6px}    .type-pill.in{background:rgba(52,211,153,.15);color:var(--good);border:1px solid rgba(52,211,153,.35)}    .type-pill.out{background:rgba(248,113,113,.12);color:var(--bad);border:1px solid rgba(248,113,113,.35)}    .amount{font-feature-settings:"tnum" on, "lnum" on;font-variant-numeric:tabular-nums;white-space:nowrap}    .amount.in{color:var(--good)}    .amount.out{color:var(--bad)}    .amount.eq{color:var(--accent-2)}    .muted{color:var(--sub)}    .summary{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:8px}    @media (max-width:700px){.summary{grid-template-columns:1fr}}    .summary .tile{background:linear-gradient(180deg,#131a2a,#0e1422);border:1px solid #202739;border-radius:14px;padding:14px}    .summary .tile h3{margin:0 0 6px;font-size:12px;text-transform:uppercase;letter-spacing:.1em;color:#9aa3ba}    .summary .tile .val{font-size:22px;font-weight:800}    .tile.in .val{color:var(--good)}    .tile.out .val{color:var(--bad)}    .tile.eq .val{color:var(--accent-2)}    .right{margin-left:auto}    .small{font-size:12px}    .sep{height:1px;background:#222a3d;margin:12px 0}    .checkbox{display:flex;gap:8px;align-items:center}    dialog{border:none;border-radius:16px;padding:0;max-width:520px;width:calc(100% - 24px);background:#111623;color:var(--text)}    dialog::backdrop{background:rgba(0,0,0,.55)}    .modal{padding:16px}    .modal h3{margin:0 0 12px;font-size:16px}  </style></head><body>  <div class="container">    <div class="app">      <header>        <h1> Keuangan Harian <span class="small muted">— tambah, edit, hapus</span></h1>        <span class="badge">Localonly • Offline</span>      </header>      <div class="grid">        <section class="card">          <h2>Tambah Transaksi</h2>          <div class="row">            <div style="flex:1 1 160px">              <label for="date">Tanggal</label>              <input type="date" id="date" />            </div>            <div style="flex:2 1 260px">              <label for="desc">Keterangan</label>              <input type="text" id="desc" placeholder="Contoh: Nasi Goreng / Gaji / TopUp" />            </div>            <div style="flex:1 1 120px">              <label for="type">Tipe</label>              <select id="type">                <option value="income">+ Pemasukan</option>                <option value="expense"> Pengeluaran</option>              </select>            </div>            <div style="flex:1 1 140px">              <label for="amount">Nominal (Rp)</label>              <input type="number" id="amount" min="0" step="100" placeholder="0" />            </div>          </div>          <div class="row" style="margin-top:10px;align-items:end;justify-content:space-between">            <div style="flex:1 1 180px">              <label for="opening">Saldo Awal (opsional)</label>              <input type="number" id="opening" min="0" step="100" placeholder="0" />            </div>            <div class="toolbar right">              <button class="btn" id="btnClear">Bersihkan</button>              <button class="btn primary" id="btnAdd">Tambah</button>            </div>          </div>          <div class="sep"></div>          <div class="toolbar">            <button class="btn" id="btnExport">Export JSON</button>            <button class="btn" id="btnImport">Import JSON</button>            <button class="btn warn" id="btnReset">Reset Semua</button>          </div>        </section>        <section class="card">          <h2>Ringkasan</h2>          <div class="summary">            <div class="tile in">              <h3>Total Pemasukan (+)</h3>              <div id="sumIncome" class="val">Rp0</div>            </div>            <div class="tile out">              <h3>Total Pengeluaran ()</h3>              <div id="sumExpense" class="val">Rp0</div>            </div>            <div class="tile eq">              <h3>Sisa / Saldo (=)</h3>              <div id="sumBalance" class="val">Rp0</div>            </div>          </div>          <p class="small muted" style="margin-top:8px">Gunakan kolom <b></b> di tabel untuk <em>edit</em> atau <em>hapus</em> baris.</p>        </section>      </div>      <section class="card" style="margin:0 18px 18px">        <h2>Daftar Transaksi</h2>        <div class="row" style="margin-bottom:8px">          <div style="flex:1 1 180px"><input type="date" id="filterFrom"/></div>          <div style="flex:1 1 180px"><input type="date" id="filterTo"/></div>          <div class="toolbar">            <button class="btn" id="btnFilter">Filter</button>            <button class="btn" id="btnClearFilter">Hapus Filter</button>            <button class="btn" id="btnPrint">Cetak/Print</button>          </div>        </div>        <div style="overflow:auto">          <table>            <thead>              <tr>                <th>Tanggal</th>                <th>Keterangan</th>                <th>Tipe</th>                <th>Nominal</th>                <th>Saldo ( = )</th>                <th></th>              </tr>            </thead>            <tbody id="tbody"></tbody>          </table>        </div>      </section>    </div>  </div>  <dialog id="modalEdit">    <div class="modal">      <h3>Edit Transaksi</h3>      <div class="row">        <div style="flex:1 1 160px">          <label>Tanggal</label>          <input type="date" id="e_date" />        </div>        <div style="flex:2 1 260px">          <label>Keterangan</label>          <input type="text" id="e_desc" />        </div>        <div style="flex:1 1 120px">          <label>Tipe</label>          <select id="e_type">            <option value="income">+ Pemasukan</option>            <option value="expense"> Pengeluaran</option>          </select>        </div>        <div style="flex:1 1 140px">          <label>Nominal (Rp)</label>          <input type="number" id="e_amount" min="0" step="100" />        </div>      </div>      <div class="row" style="margin-top:12px;justify-content:flex-end">        <button class="btn" id="btnCloseEdit">Batal</button>        <button class="btn primary" id="btnSaveEdit">Simpan</button>      </div>    </div>  </dialog>  <input id="importPicker" type="file" accept="application/json" style="display:none" />  <script>    const $ = (q)=>document.querySelector(q);    const $$ = (q)=>document.querySelectorAll(q);    const fmt = new Intl.NumberFormat('id-ID', {style:'currency', currency:'IDR', maximumFractionDigits:0});    const STORE_KEY = 'keu.entries.v1';    const STORE_OPENING = 'keu.opening.v1';    /** @typedef {{id:string,date:string,desc:string,type:'income'|'expense',amount:number}} Entry */    /** @type {Entry[]} */    let entries = loadEntries();    let editingId = null;    // Prefill today    $('#date').valueAsDate = new Date();    // Restore opening    $('#opening').value = localStorage.getItem(STORE_OPENING) || '';    $('#opening').addEventListener('change', ()=>{      localStorage.setItem(STORE_OPENING, $('#opening').value || '');      render();    });    $('#btnAdd').addEventListener('click', ()=>{      const date = $('#date').value; const desc = $('#desc').value.trim();      const type = /** @type {'income'|'expense'} */ ($('#type').value);      const amount = Number($('#amount').value);      if(!date || !desc || !amount){        alert('Lengkapi tanggal, keterangan, dan nominal.'); return;      }      entries.push({id:genId(), date, desc, type, amount});      persist(); clearForm(); render();    });    $('#btnClear').addEventListener('click', clearForm);    $('#btnExport').addEventListener('click', ()=>{      const blob = new Blob([JSON.stringify({opening: Number($('#opening').value||0), entries}, null, 2)], {type:'application/json'});      const url = URL.createObjectURL(blob);      const a = document.createElement('a'); a.href = url; a.download = `keuangan-${new Date().toISOString().slice(0,10)}.json`; a.click();      URL.revokeObjectURL(url);    });    $('#btnImport').addEventListener('click', ()=> $('#importPicker').click());    $('#importPicker').addEventListener('change', async (e)=>{      const file = e.target.files[0]; if(!file) return;      const text = await file.text();      try{        const data = JSON.parse(text);        if(Array.isArray(data.entries)) entries = data.entries.map(coerceEntry);        if(typeof data.opening === 'number') { localStorage.setItem(STORE_OPENING, String(data.opening)); $('#opening').value = String(data.opening || ''); }        persist(); render(); alert('Import berhasil.');      }catch(err){ alert('File JSON tidak valid.'); }      e.target.value = '';    });    $('#btnReset').addEventListener('click', ()=>{      if(confirm('Hapus semua data?')){ entries = []; persist(); render(); }    });    $('#btnFilter').addEventListener('click', render);    $('#btnClearFilter').addEventListener('click', ()=>{ $('#filterFrom').value=''; $('#filterTo').value=''; render(); });    $('#btnPrint').addEventListener('click', ()=> window.print());    function clearForm(){ $('#desc').value=''; $('#amount').value=''; $('#type').value='income'; $('#date').valueAsDate = new Date(); }    function genId(){ return Math.random().toString(36).slice(2,9)+Date.now().toString(36).slice(4); }    function loadEntries(){ try{ return JSON.parse(localStorage.getItem(STORE_KEY)||'[]').map(coerceEntry); }catch{ return []; } }    function persist(){ localStorage.setItem(STORE_KEY, JSON.stringify(entries)); }    function coerceEntry(e){      return { id:String(e.id||genId()), date:String(e.date||''), desc:String(e.desc||''), type:(e.type==='expense'?'expense':'income'), amount:Number(e.amount||0) };    }    function inRange(date, from, to){      const d = new Date(date).setHours(0,0,0,0);      if(from && d < new Date(from).setHours(0,0,0,0)) return false;      if(to && d > new Date(to).setHours(0,0,0,0)) return false;      return true;    }    function render(){      const tbody = $('#tbody'); tbody.innerHTML = '';      const from = $('#filterFrom').value; const to = $('#filterTo').value;      // Sort by date asc, then created order      const list = entries.slice().sort((a,b)=> new Date(a.date) - new Date(b.date));      const opening = Number($('#opening').value||0);      let balance = opening; // starting balance      // Summary accumulators (respecting filters)      let sumIn=0, sumOut=0;      for(const e of list){        if(!inRange(e.date, from, to)) continue;        if(e.type==='income'){ sumIn += e.amount; balance += e.amount; } else { sumOut += e.amount; balance -= e.amount; }        const tr = document.createElement('tr');        tr.innerHTML = `          <td class="small">${escapeHtml(formatDate(e.date))}</td>          <td>${escapeHtml(e.desc)}</td>          <td>            <span class="type-pill ${e.type==='income'?'in':'out'}">${e.type==='income'?'':''} ${e.type==='income'?'Pemasukan':'Pengeluaran'}</span>          </td>          <td class="amount ${e.type==='income'?'in':'out'}">${fmt.format(e.amount)}</td>          <td class="amount eq">${fmt.format(balance)}</td>          <td>            <div class="toolbar">              <button class="btn" onclick="editEntry('${e.id}')">Edit</button>              <button class="btn danger" onclick="delEntry('${e.id}')">Hapus</button>            </div>          </td>`;        tbody.appendChild(tr);      }      // Update summary tiles (note: only filtered entries counted; opening shown via tooltip)      $('#sumIncome').textContent = fmt.format(sumIn);      $('#sumExpense').textContent = fmt.format(sumOut);      $('#sumBalance').textContent = fmt.format(opening + sumIn - sumOut);    }    function formatDate(iso){ if(!iso) return ''; const d = new Date(iso+'T00:00:00'); return d.toLocaleDateString('id-ID', {year:'numeric', month:'short', day:'2-digit'}); }    function escapeHtml(s){ return s.replace(/[&<>\"']/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c])); }    // Editing flow    window.editEntry = (id)=>{      const e = entries.find(x=>x.id===id); if(!e) return;      editingId = id;      $('#e_date').value = e.date;      $('#e_desc').value = e.desc;      $('#e_type').value = e.type;      $('#e_amount').value = String(e.amount);      $('#modalEdit').showModal();    }    window.delEntry = (id)=>{      if(!confirm('Hapus transaksi ini?')) return;      entries = entries.filter(x=>x.id!==id); persist(); render();    }    $('#btnCloseEdit').addEventListener('click', ()=> $('#modalEdit').close());    $('#btnSaveEdit').addEventListener('click', ()=>{      if(!editingId) return;      const idx = entries.findIndex(x=>x.id===editingId); if(idx<0) return;      const d = $('#e_date').value; const k = $('#e_desc').value.trim(); const t = /** @type {'income'|'expense'} */($('#e_type').value); const a = Number($('#e_amount').value);      if(!d || !k || !a){ alert('Lengkapi tanggal, keterangan, dan nominal.'); return; }      entries[idx] = {...entries[idx], date:d, desc:k, type:t, amount:a};      persist(); $('#modalEdit').close(); render();    });    // Seed example (optional) — uncomment if you want initial data    if(entries.length===0){      const sample = [        {date:'2025-08-16', desc:'Saldo Awal', type:'income', amount:1000000},        {date:'2025-08-16', desc:'Piattos', type:'expense', amount:17400},        {date:'2025-08-16', desc:'Rebo', type:'expense', amount:17900},        {date:'2025-08-16', desc:'Pentine Black', type:'expense', amount:59000},        {date:'2025-08-16', desc:'Floridina', type:'expense', amount:3500},        {date:'2025-08-16', desc:'Nasi Goreng', type:'expense', amount:15000},        {date:'2025-08-16', desc:'Kanebo', type:'expense', amount:30000},        {date:'2025-08-16', desc:'Vixal', type:'expense', amount:16000},        {date:'2025-08-16', desc:'Tabung Gas', type:'expense', amount:15000},        {date:'2025-08-18', desc:'Roti Tawar (tanpa kulit)', type:'expense', amount:17000},        {date:'2025-08-18', desc:'Cuci/Busa Motor', type:'expense', amount:9000},        {date:'2025-08-18', desc:'Plastik', type:'expense', amount:300},        {date:'2025-08-18', desc:'Nasi Goreng', type:'expense', amount:15000},        {date:'2025-08-18', desc:'TopUp GoPay', type:'expense', amount:200000},        {date:'2025-08-19', desc:'Nasi Goreng', type:'expense', amount:15000},        {date:'2025-08-20', desc:'Panel 1 GB', type:'income', amount:3000},        {date:'2025-08-20', desc:'Panel 2 GB', type:'income', amount:5000},        {date:'2025-08-20', desc:'Capcut Private 1B', type:'income', amount:12000},        {date:'2025-08-20', desc:'Beras 1 Kg', type:'expense', amount:15000},        {date:'2025-08-20', desc:'Rinso Bubuk (1 Ranjang)', type:'expense', amount:5000},        {date:'2025-08-20', desc:'Air Putih 2 Botol', type:'expense', amount:4000},        {date:'2025-08-20', desc:'Tomat', type:'expense', amount:3000},        {date:'2025-08-20', desc:'Roti Aoka', type:'expense', amount:2500},        {date:'2025-08-20', desc:'Bawang Merah', type:'expense', amount:2000},        {date:'2025-08-20', desc:'Cabe Cengek', type:'expense', amount:2000},        {date:'2025-08-21', desc:'Dana Tidak Dikenal', type:'income', amount:50000},        {date:'2025-08-21', desc:'Ojek', type:'expense', amount:5000},        {date:'2025-08-21', desc:'Makan', type:'expense', amount:39000},        {date:'2025-08-22', desc:'Dana Tidak Dikenal', cat:'Lain-lain', type:'income', amount:12000},        {date:'2025-08-22', desc:'Roti Tawar Kulit', cat:'Makan', type:'expense', amount:14000},        {date:'2025-08-22', desc:'TopUp GoPay', cat:'TopUp', type:'expense', amount:50000},        {date:'2025-08-22', desc:'G2G Ungu', cat:'Belanja', type:'expense', amount:51900},        ];         entries = sample.map((e,i)=>({...e,id:genId()}));         persist();        }         render();  </script></body></html>